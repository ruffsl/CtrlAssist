app-id: io.github.ruffsl.ctrlassist
runtime: org.freedesktop.Platform
runtime-version: '25.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.rust-stable
command: ctrlassist
finish-args:
  - --device=all
modules:
  - name: ctrlassist
    buildsystem: simple
    build-options:
      append-path: /usr/lib/sdk/rust-stable/bin
      env:
        CARGO_HOME: /run/build/ctrlassist/cargo
        CARGO_NET_OFFLINE: 'true'
    build-commands:
      - cargo --offline fetch --verbose
      - cargo --offline build --release --all-features
      - install -Dm0755 target/release/ctrlassist ${FLATPAK_DEST}/bin/ctrlassist
      - install -Dm0644 io.github.ruffsl.ctrlassist.metainfo.xml ${FLATPAK_DEST}/share/metainfo/io.github.ruffsl.ctrlassist.metainfo.xml
    sources:
      # - type: git
      #   url: https://github.com/ruffsl/CtrlAssist.git
      #   tag: "v0.2.0"
      #   commit: "01ad0fc3f4b3514693d218134df1b506851a0431"
      - cargo-sources.json
      - type: file
        path: io.github.ruffsl.ctrlassist.metainfo.xml
      - type: dir
        path: ../
